{% extends "core/base.html" %}

{% block page_title %}{{ device.hostname }}{% endblock %}

{% block content %}
<div class="grid-container" style="grid-template-columns: 2fr 1fr;">
    <!-- Main Device Info -->
    <div class="widget-card">
        <h2 style="margin-top: 0; color: var(--accent-blue);">System Information</h2>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <div class="form-group">
                <label>Operating System</label>
                <div style="font-size: 1.1rem;">{{ device.os_info }}</div>
            </div>
            <div class="form-group">
                <label>Agent Version</label>
                <div>{{ device.agent_version }}</div>
            </div>
            <div class="form-group">
                <label>Local IP</label>
                <div style="font-family: monospace;">{{ device.local_ip }}</div>
            </div>
            <div class="form-group">
                <label>Public IP</label>
                <div style="font-family: monospace;">{{ device.public_ip }}</div>
            </div>
            <div class="form-group">
                <label>MAC Address</label>
                <div style="font-family: monospace;">{{ device.mac_address }}</div>
            </div>
        </div>

        <h3 style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px; color: var(--accent-green);">Telemetry History</h3>
        <!-- Placeholder for graph -->
        <div style="height: 200px; background: rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center; color: #666; border-radius: 8px;">
            [Telemetry Graph Placeholder]
        </div>

        <h4 style="margin-top: 20px;">Recent Metrics</h4>
        <table style="font-size: 0.9rem;">
            <thead>
                <tr>
                    <th>Time</th>
                    <th>CPU</th>
                    <th>RAM</th>
                    <th>Disk</th>
                </tr>
            </thead>
            <tbody>
                {% for data in device.telemetry.all|slice:":5" %}
                <tr>
                    <td>{{ data.timestamp|date:"H:i:s" }}</td>
                    <td>{{ data.cpu_usage }}%</td>
                    <td>{{ data.ram_usage }}%</td>
                    <td>{{ data.disk_usage }}%</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Sidebar Actions -->
    <div class="widget-card">
        <div class="form-group">
            <div class="widget-title">Status</div>
            <div class="{% if device.is_online %}status-online{% else %}status-offline{% endif %}" style="font-size: 1.5rem; font-weight: bold;">
                {% if device.is_online %}ONLINE{% else %}OFFLINE{% endif %}
            </div>
            <div style="font-size: 0.8rem; color: #666;">Last seen: {{ device.last_seen|timesince }} ago</div>
        </div>

        <h3 style="color: var(--accent-yellow);">Remote Actions</h3>
        <div style="display: grid; gap: 10px;">
            <button class="btn btn-primary" style="width: 100%; text-align: center;">Remote Control</button>
            <button class="btn" style="width: 100%; text-align: center; background: rgba(255,50,50,0.1); color: var(--accent-red); border: 1px solid var(--accent-red);">Restart Agent</button>
            <button class="btn" style="width: 100%; text-align: center; background: rgba(255,255,255,0.1);">Ping</button>
        </div>
    </div>
</div>
{% endblock %}
